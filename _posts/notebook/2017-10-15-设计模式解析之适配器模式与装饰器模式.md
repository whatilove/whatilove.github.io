---
layout: post
title: 设计模式解析之适配器模式与装饰器模式
categories: 笔记本
tags: [java]
---

## 适配器模式

把一个类的接口变换成客户端所能接受的另一种接口，从而使两个接口不匹配而无法在一起工作的两个类能够在一起工作。

通常被用在一个项目需要引用一些开源框架来一起工作的情况下，这些框架的内部都有一些关于环境信息的接口，需要从外部传入，但是外部接口不一定能匹配，在这种情况下，就需要适配模式来转换接口。

### 适配器模式的结构

适配器模式类结构图：

![](/assets/images/post/java/adapter.png)

* Target（目标接口）：所要转换的所期待的接口。
* Adaptee（源角色）：需要适配的接口。
* Adapter（适配器）：将源接口适配成目标接口，继承源接口，实现目标接口。

### Java I/O 中的适配器模式

InputStreamReader 类结构图：
![](/assets/images/post/java/InputStreamReader.png)

InputStreamReader 实现了 Reader 接口（抽象类），通过在构造方法中传入 InputStream 的实例，持有 InputStream 的引用，通过 StreamDecoder 类间接持有的，因为从 byte 到 char 要经过编码。

InputStreamReader 的作用就是将 InputStream 适配到 Reader。其中适配器就是 InputStreamReader 类，源角色就是 InputStream 代表的实例对象，目标接口就是 Reader 类，OutputStreamWriter 类也是类似的方式。

在 I/O 类库中还有很多，如 StringReader 将一个 String 类适配到 Reader 接口，ByteArrayInputStream 适配器将 byte 数组适配到 InputStream 流处理接口。

## 装饰器模式

装饰器模式的目的就是将某个类重新装扮一下，使其功能更强大，但做为原来这个类的使用者不应该感受到装饰前和装饰后有什么不同，否则就破坏了原有类的结构。要做到对被装饰类的使用者透明。



## 适配器模式与装饰器模式区别

> 待更新

## 参考

* 《深入分析Java Web技术内幕》（修订版） 许令波 著
